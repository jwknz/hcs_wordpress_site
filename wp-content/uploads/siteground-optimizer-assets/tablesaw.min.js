/*! Tablesaw - v2.0.1 - 2015-10-09
* https://github.com/filamentgroup/tablesaw
* Copyright (c) 2015 Filament Group; Licensed MIT */typeof Tablesaw=="undefined"&&(Tablesaw={i18n:{modes:['Stack','Swipe','Toggle'],columns:'Col<span class="a11y-sm">umn</span>s',columnBtnText:'Columns',columnsDialogError:'No eligible columns.',sort:'Sort'},mustard:'querySelector'in document&&(!window.blackberry||window.WebKitPoint)&&!window.operamini}),Tablesaw.config||(Tablesaw.config={}),Tablesaw.mustard&&jQuery(document.documentElement).addClass('tablesaw-enhanced'),function(a){var b="table",d={toolbar:"tablesaw-bar"},e={create:"tablesawcreate",destroy:"tablesawdestroy",refresh:"tablesawrefresh"},f="stack",g="table[data-tablesaw-mode],table[data-tablesaw-sortable]",c=function(b){if(!b)throw new Error("Tablesaw requires an element.");this.table=b,this.$table=a(b),this.mode=this.$table.attr("data-tablesaw-mode")||f,this.init()};c.prototype.init=function(){this.$table.attr("id")||this.$table.attr("id",b+"-"+Math.round(Math.random()*1e4)),this.createToolbar();var a=this._initCells();this.$table.trigger(e.create,[this,a])},c.prototype._initCells=function(){var b,c=this.table.querySelectorAll("thead tr"),d=this;return a(c).each(function(){var e=0;a(this).children().each(function(){var a=parseInt(this.getAttribute("colspan"),10),f=":nth-child("+(e+1)+")",g;if(b=e+1,a)for(g=0;g<a-1;g++)e++,f+=", :nth-child("+(e+1)+")";this.cells=d.$table.find("tr").not(c[0]).not(this).children().filter(f),e++})}),b},c.prototype.refresh=function(){this._initCells(),this.$table.trigger(e.refresh)},c.prototype.createToolbar=function(){var b=this.$table.prev().filter('.'+d.toolbar);b.length||(b=a('<div>').addClass(d.toolbar).insertBefore(this.$table)),this.$toolbar=b,this.mode&&this.$toolbar.addClass('mode-'+this.mode)},c.prototype.destroy=function(){this.$table.prev().filter('.'+d.toolbar).each(function(){this.className=this.className.replace(/\bmode\-\w*\b/gi,'')});var c=this.$table.attr('id');a(document).unbind("."+c),a(window).unbind("."+c),this.$table.trigger(e.destroy,[this]),this.$table.removeAttr('data-tablesaw-mode'),this.$table.removeData(b)},a.fn[b]=function(){return this.each(function(){var d=a(this),e;if(d.data(b))return;e=new c(this),d.data(b,e)})},a(document).on("enhance.tablesaw",function(c){Tablesaw.mustard&&a(c.target).find(g)[b]()})}(jQuery),function(g,a,f){var b={stackTable:'tablesaw-stack',cellLabels:'tablesaw-cell-label',cellContentLabels:'tablesaw-cell-content'},e={obj:'tablesaw-stack'},d={labelless:'data-tablesaw-no-labels',hideempty:'data-tablesaw-hide-empty'},c=function(b){this.$table=a(b),this.labelless=this.$table.is('['+d.labelless+']'),this.hideempty=this.$table.is('['+d.hideempty+']'),this.labelless||(this.allHeaders=this.$table.find("th")),this.$table.data(e.obj,this)};c.prototype.init=function(f){var c,e;if(this.$table.addClass(b.stackTable),this.labelless)return;c=a(this.allHeaders),e=this.hideempty,c.each(function(){var h=a(this),c=a(this.cells).filter(function(){return!a(this).parent().is("["+d.labelless+"]")&&(!e||!a(this).is(":empty"))}),i=c.not(this).filter("thead th").length&&" tablesaw-cell-label-top",j=h.find(".tablesaw-sortable-btn"),g=j.length?j.html():h.html(),k,l;g!==""&&(i?(k=parseInt(a(this).attr("colspan"),10),l="",k&&(l="td:nth-child("+k+"n + "+f+")"),c.filter(l).prepend("<b class='"+b.cellLabels+i+"'>"+g+"</b>")):(c.wrapInner("<span class='"+b.cellContentLabels+"'></span>"),c.prepend("<b class='"+b.cellLabels+"'>"+g+"</b>")))})},c.prototype.destroy=function(){this.$table.removeClass(b.stackTable),this.$table.find('.'+b.cellLabels).remove(),this.$table.find('.'+b.cellContentLabels).each(function(){a(this).replaceWith(this.childNodes)})},a(document).on("tablesawcreate",function(e,a,b){if(a.mode==='stack'){var d=new c(a.table);d.init(b)}}),a(document).on("tablesawdestroy",function(c,b){b.mode==='stack'&&a(b.table).data(e.obj).destroy()})}(this,jQuery),function(a){var b="tablesawbtn",c={_create:function(){return a(this).each(function(){a(this).trigger("beforecreate."+b)[b]("_init").trigger("create."+b)})},_init:function(){var d=a(this),c=this.getElementsByTagName("select")[0];return c&&a(this).addClass("btn-select")[b]("_select",c),d},_select:function(b){var c=function(g,h){var e=a(h).find("option"),f,b,d,c,i;if(e.each(function(){var a=this;a.selected&&(f=document.createTextNode(a.text))}),d=g.childNodes,e.length>0)for(c=0,i=d.length;c<i;c++)b=d[c],b&&b.nodeType===3&&g.replaceChild(f,b)};c(this,b),a(this).bind("change refresh",function(){c(this,b)})}};a.fn[b]=function(c,d,e,f){return this.each(function(){if(c&&typeof c=="string")return a.fn[b].prototype[c].call(this,d,e,f);if(a(this).data(b+"active"))return a(this);a(this).data(b+"active",!0),a.fn[b].prototype._create.call(this)})},a.extend(a.fn[b].prototype,c)}(jQuery),function(c,a,d){var b=function(b){this.$table=a(b),this.classes={columnToggleTable:'tablesaw-columntoggle',columnBtnContain:'tablesaw-columntoggle-btnwrap tablesaw-advance',columnBtn:'tablesaw-columntoggle-btn tablesaw-nav-btn down',popup:'tablesaw-columntoggle-popup',priorityPrefix:'tablesaw-priority-',toolbar:'tablesaw-bar'},this.headers=this.$table.find('tr:first > th'),this.$table.data('tablesaw-coltoggle',this)};b.prototype.init=function(){var c,g,e,h,d,b,f=this,j,k;this.$table.addClass(this.classes.columnToggleTable),c=this.$table.attr("id"),g=c+"-popup",b=a("<div class='"+this.classes.columnBtnContain+"'></div>"),e=a("<a href='#"+g+"' class='btn btn-micro "+this.classes.columnBtn+"' data-popup-link>"+"<span>"+Tablesaw.i18n.columnBtnText+"</span></a>"),h=a("<div class='dialog-table-coltoggle "+this.classes.popup+"' id='"+g+"'></div>"),d=a("<div class='btn-group'></div>"),j=!1,a(this.headers).not("td").each(function(){var b=a(this),c=b.attr("data-tablesaw-priority"),e=b.add(this.cells);c&&c!=="persist"&&(e.addClass(f.classes.priorityPrefix+c),a("<label><input type='checkbox' checked>"+b.text()+"</label>").appendTo(d).children(0).data("cells",e),j=!0)}),j||d.append('<label>'+Tablesaw.i18n.columnsDialogError+'</label>'),d.appendTo(h),d.find('input[type="checkbox"]').on("change",function(b){var c=b.target.checked;a(b.target).data("cells").toggleClass("tablesaw-cell-hidden",!c).toggleClass("tablesaw-cell-visible",c),f.$table.trigger('tablesawcolumns')}),e.appendTo(b),b.appendTo(this.$table.prev().filter('.'+this.classes.toolbar));function l(){b.addClass('visible'),e.removeClass('down').addClass('up'),a(document).unbind('click.'+c,i),window.clearTimeout(k),k=window.setTimeout(function(){a(document).one('click.'+c,i)},15)}function i(d){if(d&&a(d.target).closest("."+f.classes.popup).length)return;a(document).unbind('click.'+c),e.removeClass('up').addClass('down'),b.removeClass('visible')}e.on("click.tablesaw",function(a){a.preventDefault(),b.is(".visible")?i():l()}),h.appendTo(b),this.$menu=d,a(window).on("resize."+c,function(){f.refreshToggle()}),this.refreshToggle()},b.prototype.refreshToggle=function(){this.$menu.find("input").each(function(){var b=a(this);this.checked=b.data("cells").eq(0).css("display")==="table-cell"})},b.prototype.refreshPriority=function(){var b=this;a(this.headers).not("td").each(function(){var d=a(this),c=d.attr("data-tablesaw-priority"),e=d.add(this.cells);c&&c!=="persist"&&e.addClass(b.classes.priorityPrefix+c)})},b.prototype.destroy=function(){this.$table.removeClass(this.classes.columnToggleTable),this.$table.find('th, td').each(function(){var b=a(this);b.removeClass('tablesaw-cell-hidden').removeClass('tablesaw-cell-visible'),this.className=this.className.replace(/\bui\-table\-priority\-\d\b/g,'')})},a(document).on("tablesawcreate",function(d,a){if(a.mode==='columntoggle'){var c=new b(a.table);c.init()}}),a(document).on("tablesawdestroy",function(c,b){b.mode==='columntoggle'&&a(b.table).data('tablesaw-coltoggle').destroy()})}(this,jQuery),function(b,a,e){a.extend(Tablesaw.config,{swipe:{horizontalThreshold:15,verticalThreshold:30}});function c(){var a=document.createElement('div'),b=a.getElementsByTagName('i');return a.innerHTML='<!--[if lte IE 8]><i></i><![endif]-->',!!b.length}function d(d){var l=a("<div class='tablesaw-advance'></div>"),s=a("<a href='#' class='tablesaw-nav-btn btn btn-micro left' title='Previous Column'></a>").appendTo(l),o=a("<a href='#' class='tablesaw-nav-btn btn btn-micro right' title='Next Column'></a>").appendTo(l),t='disabled',u='tablesaw-fix-persist',e=d.find("thead th"),i=e.not('[data-tablesaw-priority="persist"]'),p=[],C=a(document.head||'head'),f=d.attr('id'),q=!c();if(!e.length)throw new Error("tablesaw swipe: no header cells found. Are you using <th> inside of <thead>?");d.css('width','auto'),e.each(function(){p.push(a(this).outerWidth())}),d.css('width',''),l.appendTo(d.prev().filter('.tablesaw-bar')),d.addClass("tablesaw-swipe"),f||(f='tableswipe-'+Math.round(Math.random()*1e4),d.attr('id',f));function n(b){return a(b.cells).add(b)}function w(a){n(a).removeClass('tablesaw-cell-hidden')}function r(a){n(a).addClass('tablesaw-cell-hidden')}function B(a){n(a).addClass('tablesaw-cell-persist')}function z(b){return a(b).is('[data-tablesaw-priority="persist"]')}function D(){d.removeClass(u),a('#'+f+'-persist').remove()}function x(){var i='#'+f+'.tablesaw-swipe ',b=[],j=d.width(),h=[],c,g;e.each(function(d){var c;z(this)&&(c=a(this).outerWidth(),c<j*.75&&(h.push(d+'-'+c),b.push(i+' .tablesaw-cell-persist:nth-child('+(d+1)+') { width: '+c+'px; }')))}),c=h.join('_'),d.addClass(u),g=a('#'+f+'-persist'),(!g.length||g.data('hash')!==c)&&(g.remove(),b.length&&a('<style>'+b.join("\n")+'</style>').attr('id',f+'-persist').data('hash',c).appendTo(C))}function k(){var b=[],c;return i.each(function(d){var e=a(this),f=e.css("display")==="none"||e.is(".tablesaw-cell-hidden");if(!f&&!c)c=!0,b[0]=d;else if(f&&c)return b[1]=d,!1}),b}function v(){var a=k();return[a[1]-1,a[0]-1]}function y(a){return a?k():v()}function m(a){return a[1]>-1&&a[1]<i.length}function A(){var a=d.attr("data-tablesaw-swipe-media");return!a||"matchMedia"in b&&b.matchMedia(a).matches}function h(){var j,f,g,b,h,i,c;if(!A())return;j=20,f=d.parent().width(),g=[],b=0,h=[],i=e.length,e.each(function(d){var e=a(this),c=e.is('[data-tablesaw-priority="persist"]');g.push(c),b+=p[d]+(c?0:j),h.push(b),(c||b>f)&&i--}),c=i===0,e.each(function(a){if(g[a]){B(this);return}h[a]<=f||c?(c=!1,w(this)):r(this)}),q&&D(),d.trigger('tablesawcolumns')}function g(b){var a=y(b);m(a)&&(isNaN(a[0])&&(b?a[0]=0:a[0]=i.length-1),q&&x(),r(i.get(a[0])),w(i.get(a[1])),d.trigger('tablesawcolumns'))}s.add(o).click(function(b){g(!!a(b.target).closest(o).length),b.preventDefault()});function j(a,b){return(a.touches||a.originalEvent.touches)[0][b]}d.bind("touchstart.swipetoggle",function(f){var d=j(f,'pageX'),i=j(f,'pageY'),c,e;a(b).off("resize",h),a(this).bind("touchmove",function(a){c=j(a,'pageX'),e=j(a,'pageY');var b=Tablesaw.config.swipe;Math.abs(c-d)>b.horizontalThreshold&&Math.abs(e-i)<b.verticalThreshold&&a.preventDefault()}).bind("touchend.swipetoggle",function(){var f=Tablesaw.config.swipe;Math.abs(e-i)<f.verticalThreshold&&(c-d<-1*f.horizontalThreshold&&g(!0),c-d>f.horizontalThreshold&&g(!1)),window.setTimeout(function(){a(b).on("resize",h)},300),a(this).unbind("touchmove touchend")})}).bind("tablesawcolumns.swipetoggle",function(){s[m(v())?"removeClass":"addClass"](t),o[m(k())?"removeClass":"addClass"](t)}).bind("tablesawnext.swipetoggle",function(){g(!0)}).bind("tablesawprev.swipetoggle",function(){g(!1)}).bind("tablesawdestroy.swipetoggle",function(){var c=a(this);c.removeClass('tablesaw-swipe'),c.prev().filter('.tablesaw-bar').find('.tablesaw-advance').remove(),a(b).off("resize",h),c.unbind(".swipetoggle")}),h(),a(b).on("resize",h)}a(document).on("tablesawcreate",function(b,a){a.mode==='swipe'&&d(a.$table)})}(this,jQuery),function(a){function e(b){return a.map(b.childNodes,function(c){var b=a(c);if(b.is('input, select'))return b.val();if(b.hasClass('tablesaw-cell-label'))return;return a.trim(b.text())}).join('')}var b="tablesaw-sortable",f="table[data-"+b+"]",g="[data-"+b+"-switch]",d={defaultCol:"data-tablesaw-sortable-default-col"},c={head:b+"-head",ascend:b+"-ascending",descend:b+"-descending",switcher:b+"-switch",tableToolbar:'tablesaw-toolbar',sortButton:b+"-btn"},h={_create:function(c){return a(this).each(function(){var d=a(this).data("init"+b);if(d)return!1;a(this).data("init"+b,!0).trigger("beforecreate."+b)[b]("_init",c).trigger("create."+b)})},_init:function(){var f=a(this),k=function(){f.addClass(b)},l=function(b){a.each(b,function(d,b){a(b).addClass(c.head)})},m=function(b,d){a.each(b,function(f,b){var e=a("<button class='"+c.sortButton+"'/>");e.bind("click",{col:b},d),a(b).wrapInner(e)})},j=function(b){a.each(b,function(f,e){var b=a(e);b.removeAttr(d.defaultCol),b.removeClass(c.ascend),b.removeClass(c.descend)})},n=function(d){if(a(d.target).is('a[href]'))return;d.stopPropagation();var e=a(this).parent(),k=d.data.col,g=i.index(e);j(e.siblings()),e.hasClass(c.descend)?(f[b]("sortBy",k,!0),g+='_asc'):(f[b]("sortBy",k),g+='_desc'),h&&h.find('select').val(g).trigger('refresh'),d.preventDefault()},o=function(b){a.each(b,function(f,e){var b=a(e);b.is("["+d.defaultCol+"]")&&(b.hasClass(c.descend)||b.addClass(c.ascend))})},p=function(g){h=a('<div>').addClass(c.switcher).addClass(c.tableToolbar).html(function(){var b=['<label>'+Tablesaw.i18n.sort+':'];return b.push('<span class="btn btn-small">&#160;<select>'),g.each(function(h){var f=a(this),i=f.is("["+d.defaultCol+"]"),j=f.hasClass(c.descend),g=!1;a(this.cells).slice(0,3).each(function(){if(!isNaN(parseInt(e(this),10)))return g=!0,!1}),b.push('<option'+(i&&!j?' selected':'')+' value="'+h+'_asc">'+f.text()+' '+(g?'&#x2191;':'(A-Z)')+'</option>'),b.push('<option'+(i&&j?' selected':'')+' value="'+h+'_desc">'+f.text()+' '+(g?'&#x2193;':'(Z-A)')+'</option>')}),b.push('</select></span></label>'),b.join('')});var i=f.prev().filter('.tablesaw-bar'),k=i.children().eq(0);k.length?h.insertBefore(k):h.appendTo(i),h.find('.btn').tablesawbtn(),h.find('select').on('change',function(){var c=a(this).val().split('_'),d=g.eq(c[0]);j(d.siblings()),f[b]('sortBy',d.get(0),c[1]==='asc')})},h,i;k(),i=f.find("thead th[data-"+b+"-col]"),l(i),m(i,n),o(i),f.is(g)&&p(i,f.find('tbody tr:nth-child(-n+3)'))},getColumnNumber:function(b){return a(b).prevAll().length},getTableRows:function(){return a(this).find("tbody tr")},sortRows:function(b,j,d,f){var k=function(c){var b=[];return a.each(c,function(c,d){b.push({cell:e(a(d).children().get(j)),rowNum:c})}),b},l=function(d,c){var b,a=/[^\-\+\d\.]/g;return d?b=function(b,d){return c||!isNaN(parseFloat(b.cell))?parseFloat(b.cell.replace(a,''))-parseFloat(d.cell.replace(a,'')):b.cell.toLowerCase()>d.cell.toLowerCase()?1:-1}:b=function(b,d){return c||!isNaN(parseFloat(b.cell))?parseFloat(d.cell.replace(a,''))-parseFloat(b.cell.replace(a,'')):b.cell.toLowerCase()<d.cell.toLowerCase()?1:-1},b},m=function(b,f){var c=[],a,d,e;for(a=0,d=b.length;a<d;a++)e=b[a].rowNum,c.push(f[e]);return c},i=k(b),c=a(f).data('tablesaw-sort'),g=(!!(c&&typeof c=="function")&&c(d))||l(d,a(f).is('[data-sortable-numeric]')),h=i.sort(g);return b=m(h,b),b},replaceTableRows:function(b){var c=a(this),d=c.find("tbody");d.html(b)},makeColDefault:function(e,f){var b=a(e);b.attr(d.defaultCol,"true"),f?(b.removeClass(c.descend),b.addClass(c.ascend)):(b.removeClass(c.ascend),b.addClass(c.descend))},sortBy:function(e,f){var c=a(this),g,d;g=c[b]("getColumnNumber",e),d=c[b]("getTableRows"),d=c[b]("sortRows",d,g,f,e),c[b]("replaceTableRows",d),c[b]("makeColDefault",e,f)}};a.fn[b]=function(c){var e=Array.prototype.slice.call(arguments,1),d;return c&&typeof c=="string"?(d=a.fn[b].prototype[c].apply(this[0],e),typeof d!="undefined"?d:a(this)):(a(this).data(b+"data")||(a(this).data(b+"active",!0),a.fn[b].prototype._create.call(this,c)),a(this))},a.extend(a.fn[b].prototype,h),a(document).on("tablesawcreate",function(c,a){a.$table.is(f)&&a.$table[b]()})}(jQuery),function(b,a,e){var c={attr:{init:'data-tablesaw-minimap'}};function d(d){var e=a('<div class="tablesaw-advance minimap">'),g=a('<ul class="tablesaw-advance-dots">').appendTo(e),h='tablesaw-advance-dots-hide',i=d.find('thead th');i.each(function(){g.append('<li><i></i></li>')}),e.appendTo(d.prev().filter('.tablesaw-bar'));function j(d){var a=d.attr(c.attr.init);return!a||b.matchMedia&&b.matchMedia(a).matches}function f(){if(!j(d)){e.hide();return}e.show();var b=g.find("li").removeClass(h);d.find("thead th").each(function(c){a(this).css("display")==="none"&&b.eq(c).addClass(h)})}f(),a(b).on("resize",f),d.bind("tablesawcolumns.minimap",function(){f()}).bind("tablesawdestroy.minimap",function(){var c=a(this);c.prev().filter('.tablesaw-bar').find('.tablesaw-advance').remove(),a(b).off("resize",f),c.unbind(".minimap")})}a(document).on("tablesawcreate",function(b,a){(a.mode==='swipe'||a.mode==='columntoggle')&&a.$table.is('[ '+c.attr.init+']')&&d(a.$table)})}(this,jQuery),function(c,b){var a={selectors:{init:'table[data-tablesaw-mode-switch]'},attributes:{excludeMode:'data-tablesaw-mode-exclude'},classes:{main:'tablesaw-modeswitch',toolbar:'tablesaw-toolbar'},modes:['stack','swipe','columntoggle'],init:function(i){var d=b(i),f=d.attr(a.attributes.excludeMode),g=d.prev().filter('.tablesaw-bar'),h='',c=b('<div>').addClass(a.classes.main+' '+a.classes.toolbar).html(function(){var c=['<label>'+Tablesaw.i18n.columns+':'],g=d.attr('data-tablesaw-mode'),e,b,i;c.push('<span class="btn btn-small">&#160;<select>');for(b=0,i=a.modes.length;b<i;b++){if(f&&f.toLowerCase()===a.modes[b])continue;e=g===a.modes[b],e&&(h=a.modes[b]),c.push('<option'+(e?' selected':'')+' value="'+a.modes[b]+'">'+Tablesaw.i18n.modes[b]+'</option>')}return c.push('</select></span></label>'),c.join('')}),e=g.find('.tablesaw-advance').eq(0);e.length?c.insertBefore(e):c.appendTo(g),c.find('.btn').tablesawbtn(),c.find('select').bind('change',a.onModeChange)},onModeChange:function(){var d=b(this),e=d.closest('.'+a.classes.main),c=d.closest('.tablesaw-bar').nextUntil(c).eq(0),f=d.val();e.remove(),c.data('table').destroy(),c.attr('data-tablesaw-mode',f),c.table()}};b(c.document).on("tablesawcreate",function(c,b){b.$table.is(a.selectors.init)&&a.init(b.table)})}(this,jQuery)